<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<style type="text/css">
	*{
		font-family: monospace;
	}
	p{
		margin:0;
	}
</style>
<title>MMO | SocketMMO</title>
</head>
<body>

	socketDebugger
	<div id="debug"></div>

</body>

</html>



<script type="text/javascript">
	var HOST = 'ws://' + window.document.location.host.replace(/:.*/, '') + ':3000'
	class Debug {
		static setTarget(target){
			this.target = target;
		}
		static log(log,color = "#000000"){
			if(this.target === undefined || this.target === null){
				this.target = document.body;
			}
			this.target.innerHTML +='<p style = " color: '+ color +' ">' + log + '</p>';
		}

	}
	class MatchingClient{
		initialize(address){
			Debug.log("web socket server address : " + address);
			this.address = address;
		}
		reqConnect(){
			Debug.log("request connect");
			if(this.address === null){
				return;
			}
			this.ws = new WebSocket(this.address);
			this.ws.onopen = this.onOpen;
			this.ws.onmessage = this.onMessage;
			this.ws.onerror = this.onError;
			Debug.log("connecting...");
		}
		onOpen(event){
			console.log(event.data);
			Debug.log("connect.","#FF8C00");
		}
		onMessage(event){
			console.log(event.data);
			var obj = JSON.parse(event.data)
            Debug.log("message : " + event.data);
		}
		onError(event){
			Debug.log("error");
		}

	}
	Debug.setTarget(document.getElementById("debug"));
	console.log("test");
	var mc = new MatchingClient();
	mc.initialize(HOST);
	mc.reqConnect();
</script>
